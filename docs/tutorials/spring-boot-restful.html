<html>
<head>
<meta charset="utf-8">

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5P98');</script>
<!-- End Google Tag Manager -->


<title>Creating a RESTful Web Service with Spring Boot - Kotlin 语言中文站</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<link rel="Shortcut Icon" href="/assets/images/favicon.ico" type="image/x-icon"/>
<link rel="apple-touch-icon" href="/assets/images/apple-touch-icon.png"/>
<link rel="apple-touch-icon" sizes="72x72"
      href="/assets/images/apple-touch-icon-72x72.png"/>
<link rel="apple-touch-icon" sizes="114x114"
      href="/assets/images/apple-touch-icon-114x114.png"/>
<link rel="apple-touch-icon" sizes="144x144"
      href="/assets/images/apple-touch-icon-144x144.png"/>
<link rel="stylesheet" href="/0_assets/styles.css">


<!-- Social Media tag Starts -->
<!-- Place this data between the <head> tags of your website -->
<!-- Open Graph data -->
<meta property="og:title" content="Creating a RESTful Web Service with Spring Boot - Kotlin 语言中文站"/>
<meta property="og:type" content="website"/>
<meta property="og:url" content="https://www.kotlincn.net/docs/tutorials/spring-boot-restful.html"/>
<meta property="og:image" content="https://www.kotlincn.net/assets/images/open-graph/kotlin_250x250.png"/>
    <meta property="og:description" content="This tutorial walks us through the process of creating a simple REST controller with Spring Boot">
<meta property="og:site_name" content="Kotlin"/>

<!-- Twitter Card data -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@kotlin">
<meta name="twitter:title" content="Creating a RESTful Web Service with Spring Boot - Kotlin 语言中文站">
    <meta name="twitter:description" content="This tutorial walks us through the process of creating a simple REST controller with Spring Boot">
<meta name="twitter:image:src" content="https://www.kotlincn.net/assets/images/twitter-card/kotlin_800x320.png">
<!-- Social Media tag Ends -->
    <script src="/0_assets/default.js"></script>
    <script src="/0_assets/common.js"></script>
    <link rel="stylesheet" href="/0_assets/common.css"/>
</head>
<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5P98"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<div class="global-layout">

<header class="global-header">

    <div class="global-header-panel">
        <div class="g-layout">
            <a class="global-header-logo" href="/">Kotlin</a>
<nav role="navigation" class="global-nav">

    <div class="nav-links">

            <a href="http://www.kotliner.cn/"
               class="nav-item "
            >
                博客
            </a>

            <a href="/docs/reference/"
               class="nav-item "
            >
                学习
            </a>

            <a href="/community/"
               class="nav-item "
            >
                社区
            </a>

            <a href="http://try.kotlinlang.org"
               class="nav-item "
            >
                在线试用
            </a>
    </div>


<div id="global-search" class=" global-search" title="Search">
    <div class="search-button">
        <div class="icon"></div>
    </div>
    <div class="search-box">
        <div class="gcse-searchbox-only"
             data-resultsUrl="/search.html"
             data-newWindow="false"
        ></div>
    </div>
</div></nav>        </div>
        <a class="conference-banner" href="https://kotlinconf.com/?utm_source=kotlinlang&utm_medium=web&utm_campaign=superearlybird">
            <div class="conference-banner__img"></div>
        </a>
    </div>

    <div class="g-layout">
    </div>
</header>
    <div class="g-layout global-content">

    <nav role="navigation" class="docs-nav">
            <div class="nav-item-wrap">
                    <a href="/docs/reference/" class="nav-item">
                    <span class="nav-item-text">
                        参考
                    </span>
                    </a>

            </div>
            <div class="nav-item-wrap">
                    <a href="/docs/tutorials/" class="nav-item is_active">
                        <span class="nav-item-text">
                            教程
                        </span>
                    </a>
            </div>
            <div class="nav-item-wrap">
                    <a href="/docs/books.html" class="nav-item">
                    <span class="nav-item-text">
                        书籍
                    </span>
                    </a>

            </div>
            <div class="nav-item-wrap">
                    <a href="/docs/resources.html" class="nav-item">
                    <span class="nav-item-text">
                        更多资源
                    </span>
                    </a>

            </div>
    </nav>

    <div class="g-grid">
        <aside class="g-3">
            <div class="js-side-tree-nav">
                    <nav role="navigation" class="side-tree-nav">
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="开始">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">开始</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/getting-started.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">以 IntelliJ IDEA 入门</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/getting-started-eclipse.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">以 Eclipse 入门</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/command-line.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">使用命令行编译器</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/build-tools.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">使用构建工具</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/koans.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">心印</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="Android">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">Android</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/kotlin-android.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Android 开发入门</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/android-plugin.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Kotlin Android 扩展</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/android-frameworks.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Android 框架</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="Java 互操作">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">Java 互操作</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/mixing-java-kotlin-intellij.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">在一个项目中混用 Java 和 Kotlin</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="JavaScript">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">JavaScript</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/javascript/kotlin-to-javascript/kotlin-to-javascript.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Kotlin 转 JavaScript</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/javascript/getting-started-gradle/getting-started-with-gradle.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">以 Gradle 入门</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/javascript/getting-started-idea/getting-started-with-intellij-idea.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">以 IntelliJ IDEA 入门</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/javascript/getting-started-maven/getting-started-with-maven.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">以 Maven 入门</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/javascript/getting-started-command-line/command-line-library-js.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">使用命令行编译器创建 Kotlin JavaScript 库</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/javascript/working-with-modules/working-with-modules.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Kotlin 与 JavaScript 模块使用</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/javascript/working-with-javascript.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">与 JavaScript 合用</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="协程">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">协程</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/coroutines-basic-jvm.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">JVM 平台的 Kotlin 协程简介</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _opened"
                 data-id="Web 开发">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">Web 开发</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/httpservlets.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">用 Http Servlets 创建 web 应用</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <div class="tree-item-title tree-leaf-title js-item-title js-leaf-title is_active">
                                <div class="marker"></div>
                                <div class="text">用  Spring Boot 创建 RESTful Web 服务</div>
                            </div>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="工具">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">工具</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/kotlin-and-ci.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">TeamCity 配置 Kotlin</span>
                            </a>
                    </div>

            </div>
    </nav>

            </div>
        </aside>

        <article role="main" class="page-content g-9">
<a href="https://github.com/hltj/kotlin-web-site-cn/edit/master/pages/docs/tutorials/spring-boot-restful.md"
   class="page-link-to-github"
   target="_blank"
   title="Edit this page on GitHub">
        <i class="github-icon"></i>
        <span class="text">Edit Page</span>
</a>
            <h1>
                Creating a RESTful Web Service with Spring Boot
            </h1>
            <table>
                    <tr>
                        <td>
                            <strong>作者</strong>
                        </td>
                        <td>
                            Hadi Hariri, Edoardo Vacchi
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <strong>源代码</strong>
                        </td>
                        <td>
                            <a href="https://github.com/JetBrains/kotlin-examples/tree/master/tutorials/spring-boot-restful">On GitHub</a>
                        </td>
                    </tr>
            </table>
                This tutorial walks us through the process of creating a simple REST controller with Spring Boot
                <br/>
                <br/>
            
<p>Kotlin works quite smoothly with Spring Boot and many of the steps found on the <a href="https://spring.io/guides">Spring Guides</a> for creating a RESTful service
can be followed verbatim for Kotlin. There are some minor differences however when it comes to defining the Gradle configuration
and the project layout structure, as well as the initialization code.</p>
<p>In this tutorial we'll walk through the steps required. For a more thorough explanation of Spring Boot and RESTful services, please see
<a href="https://spring.io/guides/gs/rest-service/">Building a RESTful Web Service</a>.</p>
<p>Note that all classes in this tutorial are in the <code>org.jetbrains.kotlin.demo</code> package.</p>
<h3 id="defining-the-project-and-dependencies">Defining the project and dependencies</h3>
<p>In this tutorial we're going to be using Gradle but the same can be accomplished using either IntelliJ IDEA project structure or Maven. For details on setting up Gradle to work with Kotlin, see <a href="/docs/reference/using-gradle.html">Using Gradle</a>.</p>
<p>The Gradle file is pretty much standard for Spring Boot. The only difference is the structure layout for source folders for Kotlin, and the required Kotlin dependencies</p>
<pre><code class="code _highlighted" data-lang="text/x-groovy">buildscript {
    ext.kotlin_version = '1.1.2-5' // Required for Kotlin integration
    ext.spring_boot_version = '1.5.3.RELEASE'
    repositories {
        jcenter()
    }
    dependencies {
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version" // Required for Kotlin integration
        classpath "org.springframework.boot:spring-boot-gradle-plugin:$spring_boot_version"
    }
}

apply plugin: 'eclipse'
apply plugin: 'idea'
apply plugin: 'kotlin' // Required for Kotlin integration
apply plugin: 'org.springframework.boot'
apply plugin: 'application'

jar {
    baseName = 'gs-rest-service'
    version = '0.1.0'
}

repositories {
    jcenter()
}

dependencies {
    compile "org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version" // Required for Kotlin integration
    compile 'org.springframework.boot:spring-boot-starter-web'
    testCompile 'junit:junit'
}

task wrapper(type: Wrapper) {
    gradleVersion = '2.9'
}
</code></pre>
<h3 id="creating-a-greeting-data-class-and-controller">Creating a Greeting Data Class and Controller</h3>
<p>The next step is to create Greeting Data class that has two properties: <em>id</em> and a <em>content</em></p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">data class Greeting(val id: Long, val content: String)
</code></pre>
<p>We now define the <em>GreetingController</em> which serves requests of the form <em>/greeting?name={value}</em> and returns a JSON object
representing an instance of <em>Greeting</em></p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">@RestController
class GreetingController {

    val counter = AtomicLong()

    @RequestMapping("/greeting")
    fun greeting(@RequestParam(value = "name", defaultValue = "World") name: String): Greeting {
        return Greeting(counter.incrementAndGet(), "Hello, $name")
    }
}
</code></pre>
<p>As can be seen, this is again pretty much a one-to-one translation of Java to Kotlin, with nothing special required for Kotlin.</p>
<h3 id="creating-the-application-class">Creating the Application class</h3>
<p>Finally we need to define an Application class. As Spring Boot looks for a public static main method, we need to define this in Kotlin
using the <em>@JvmStatic</em> annotation. For this, we create a standard <em>Application</em> class and define a companion object inside where we can then create
a function annotated with <em>@JvmStatic</em></p>
<p>Note: JvmStatic is an annotation in Kotlin which is used for interoperability with Java, so that the resulting method is defined as static when called from Java.</p>
<p>The other change needed for Spring Boot is to mark the class as open. Spring boot <em>@Configuration</em> classes cannot be final. Classes in Kotlin are final by default without the <em>open</em> modifier.</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">@SpringBootApplication
open class Application {
    companion object {
        @JvmStatic fun main(args: Array&lt;String&gt;) {
            SpringApplication.run(Application::class.java, *args)
        }
    }
}
</code></pre>
<h3 id="alternative-application-class-definition">Alternative Application class definition</h3>
<p>In Java, the <code>main()</code> method of a Spring Boot application is conventionally defined within the annotated application class. This is because Java <em>does not</em> support top-level methods.
In Kotlin, however, we <em>do</em> have <a href="/docs/reference/functions.html">top-level functions</a>. Thus, we can make the Spring main entry point much simpler:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">@SpringBootApplication
open class Application

fun main(args: Array&lt;String&gt;) {
	SpringApplication.run(Application::class.java, *args)
}
</code></pre>
<p>The only requirement for this variant to work is to declare in your <code>build.gradle</code> file to look for <em>this</em> main function. This is done through the <code>mainClass</code> property of the <code>springBoot</code> section:</p>
<pre><code class="code _highlighted" data-lang="text/x-groovy">springBoot {
    mainClass = 'my.package.YourMainClass'
}
</code></pre>
<p>In Kotlin, top-level functions are compiled into static members of an automatically-generated class. The name of this class is derived from the name of the source file. For instance, a top-level function in the <code>Application.kt</code> file would be defined in a class named <code>ApplicationKt</code>. You may add the following lines to your <code>build.gradle</code>:</p>
<pre><code class="code _highlighted" data-lang="text/x-groovy">springBoot {
    mainClass = 'kotlin.demo.ApplicationKt'
}
</code></pre>
<h3 id="running-the-application">Running the application</h3>
<p>We can now use the any of the standard Gradle tasks for Spring Boot to run the application. As such, running</p>
<pre><code>gradle bootRun
</code></pre>
<p>the application is compiled, resources bundled and launched, allowing us to access is via the browser (default port is 8080)</p>
<p><img alt="Running App" src="/assets/images/tutorials/spring-boot-restful/running-app.png"/></p>

        </article>
    </div>
    </div>

</div>

<footer role="contentinfo" class="global-footer">

    <div class="global-footer-terms">
        <div class="g-layout">

            <div class="terms-copyright">
                Licensed under the <a href="https://github.com/JetBrains/kotlin-web-site/blob/master/LICENSE">Apache 2 license</a>
            </div>

            <div class="terms-sponsor">
            Sponsored and developed by <a href="http://jetbrains.com" class="sponsor sponsor_jetbrains" target="_blank">JetBrains</a>
            由<a href="https://hltj.me/" class="testimonial-company-link" target="_blank" rel="nofollow">灰蓝天际</a>、<a href="http://tanfujun.com" class="testimonial-company-link" target="_blank" rel="nofollow">晓_晨DEV</a> <a href="/contribute.html#中文站翻译贡献者" class="testimonial-company-link" target="_blank" rel="nofollow">等</a>译
            </div>
        </div>
    </div>

</footer>
</body>
</html>